<!-- File: update.product.admin.component.html -->
<div class="page-wrapper">
  <div class="update-container">

    <div class="form-header">
      <h2 class="form-title">Cập nhật thông tin sản phẩm</h2>
      <p class="form-subtitle">Chỉnh sửa thông tin chi tiết và quản lý hình ảnh sản phẩm</p>
    </div>

    <form (ngSubmit)="updateProduct()" class="update-form">
      <div class="form-section">
        <h4 class="section-label">Thông tin chung</h4>

        <div class="form-row">
          <div class="form-group full-width">
            <label for="name">Tên sản phẩm</label>
            <input type="text" id="name" [(ngModel)]="updatedProduct.name" name="name" class="input-field" required>
          </div>
        </div>

        <div class="form-row two-col">
          <div class="form-group">
            <label for="price">Giá bán (VNĐ)</label>
            <input type="text" id="price" [(ngModel)]="updatedProduct.price" name="price" class="input-field" required>
          </div>
          <div class="form-group">
            <label for="category">Danh mục</label>
            <select id="category" [(ngModel)]="updatedProduct.category_id" name="category" class="input-field" required>
              @for(category of categories; track category.id) {
              <option [value]="category.id">{{ category.name }}</option>
              }
            </select>
          </div>
        </div>

        <div class="form-group">
          <label for="description">Mô tả chi tiết</label>
          <textarea id="description" [(ngModel)]="updatedProduct.description" name="description"
            class="input-field textarea-field" rows="5" required></textarea>
        </div>
      </div>

      <hr class="divider">

      <div class="form-section">
        <h4 class="section-label">Hình ảnh sản phẩm</h4>

        <div class="current-images-grid">
          @for(productImage of product.product_images; track productImage.image_url) {
          <div class="image-card">
            <div class="image-wrapper">
              <img [src]="productImage.image_url" alt="Product Thumbnail">
            </div>
            <button type="button" class="btn-delete-img" (click)="deleteImage(productImage)">
              <i class="fa-solid fa-trash"></i> Xóa ảnh
            </button>
          </div>
          } @empty {
          <div class="no-images-placeholder">
            <p>Sản phẩm này chưa có hình ảnh nào.</p>
          </div>
          }
        </div>

        <div class="upload-area">
          <label for="images" class="upload-label">Thêm ảnh mới (Tối đa 5 ảnh)</label>
          <input type="file" id="images" name="images" multiple (change)="onFileChange($event)" accept="image/*"
            class="file-input">
        </div>
      </div>

      <div class="form-actions">
        <button type="button" class="btn-cancel" onclick="history.back()">Hủy bỏ</button>
        <button type="submit" class="btn-save">Lưu thay đổi</button>
      </div>
    </form>

  </div>
</div>