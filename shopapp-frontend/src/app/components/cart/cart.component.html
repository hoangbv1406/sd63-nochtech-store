<!-- File: cart.component.html -->
<app-header></app-header>
<main class="container-fluid">
    <div class="container">

        @if (cartEntries.length === 0) {
        <div class="cart-page-header">Giỏ hàng trống.</div>
        } @else {
        <div class="cart-page-header">
            <span>{{ getTotalItems() }}</span>
            <span>sản phẩm trong giỏ hàng</span>
        </div>

        <div class="cart-wrapper">
            <div class="cart-items-section">
                <div class="cart-header">
                    <div class="col-checkbox"><input type="checkbox"></div>
                    <div class="col-product">Sản phẩm</div>
                    <div class="col-price">Đơn giá</div>
                    <div class="col-qty">Số lượng</div>
                    <div class="col-total">Số tiền</div>
                    <div class="col-action">Thao tác</div>
                </div>

                @for(item of cartEntries; track item.product.id) {
                <div class="shop-group">
                    <div class="product-item">
                        <div class="col-checkbox"><input type="checkbox"></div>
                        <div class="col-product product-info-wrap">
                            <div class="product-img" (click)="onProductClick(item.product.id)">
                                <img [src]="item.product.url" class="thumbnail-image" alt="Product Image">
                            </div>
                            <div class="product-details">
                                <div class="product-title">{{ item.product.name }}</div>
                            </div>
                        </div>
                        <div class="col-price">
                            <span class="price-current">{{ item.product.price | number:'1.0-0' }}₫</span>
                        </div>
                        <div class="col-qty">
                            <div class="qty-selector">
                                <button class="qty-btn" (click)="decrease(item.product.id)">-</button>
                                <input type="text" class="qty-input" value="{{ item.quantity }}">
                                <button class="qty-btn" (click)="increase(item.product.id)">+</button>
                            </div>
                        </div>
                        <div class="col-total">
                            <span class="item-total-price">
                                {{ (item.product.price * item.quantity) | number:'1.0-0' }}₫
                            </span>
                        </div>
                        <div class="col-action">
                            <span class="action-link" (click)="remove(item.product.id)">Xóa</span>
                        </div>
                    </div>
                </div>
                }
            </div>

            <div class="cart-summary-section">
                <div class="summary-card">
                    <div class="summary-title">Tổng:</div>
                    <div>
                        <div class="summary-total">
                            {{ totalAmount | number:'1.0-0' }}₫
                        </div>
                    </div>
                    <button class="btn-checkout" (click)="buyNow()">Tiến hành thanh toán</button>
                    <div class="coupon-area">
                        <div class="coupon-input-group">
                            <input type="text" class="coupon-input" placeholder="Nhập mã giảm giá">
                            <button class="btn-apply">Áp dụng</button>
                        </div>
                    </div>
                    <div class="summary-note">30-Day Money-Back Guarantee</div>
                </div>
            </div>
        </div>
        }
    </div>
</main>
<app-footer></app-footer>